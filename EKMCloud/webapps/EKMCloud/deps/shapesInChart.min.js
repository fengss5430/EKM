var drawShape_default={position:"INCHART",shape:"CIRCLE",radius:10,ellipseHeight:20,ellipseWidth:40,sideCount:4,lineCount:3,x1:0,x2:0,x3:0,x4:0,x5:0,x6:0,x7:0,x8:0,x9:0,x10:0,y1:0,y2:0,y3:0,y4:0,y5:0,y6:0,y7:0,y8:0,y9:0,y10:0,strokeStyle:"solid",strokeSize:2,strokeColor:"black",fillColor:"blue",startAngle:0,endAngle:360,limitToChart:true,paddingX1:0,paddingY1:0,paddingX2:0,paddingY2:0,paddingX3:0,paddingY3:0,paddingX4:0,paddingY4:0,paddingX5:0,paddingY5:0,paddingX6:0,paddingY6:0,paddingX7:0,paddingY7:0,paddingX8:0,paddingY8:0,paddingX9:0,paddingY9:0,paddingX10:0,paddingY10:0,when:"always",iter:"all",animate:false,arrowWidth:15,arrowHeight:20,arrowTop:true,arrowBottom:false,text:"Your Text",rotate:0,textAlign:"center",textBaseline:"middle",imagesrc:"",imageAlign:"center",imageBaseline:"middle",fontColor:"rgba(220,220,220,1)",fontStyle:"normal",fontSize:12,fontFamily:"'Arial'",textBorders:false,textBordersColor:"black",textBordersWidth:1,textBordersXSpace:3,textBordersYSpace:3,textBordersStyle:"solid",textBackgroundColor:"none"};function shapeLoadImages(e){var c,f;if(typeof e.shapesInChart=="object"){f=e.shapesInChart}if(typeof e[0]=="object"){if(typeof e[0].shapesInChart=="object"){f=e[0].shapesInChart}}if(typeof f=="object"){for(var d=0;d<f.length;d++){if(typeof f[d].shape=="string"){c=f[d].shape.toUpperCase()}else{c=drawShape_default.shape.toUpperCase()}if(c=="IMAGE"){if(typeof f[d].loadImage=="undefined"){f[d].loadImage=new Image();var b=a(f[d].imagesrc,drawShape_default.imagesrc);if(b==""){f[d].loadImage.src="data:image/gif;base64,R0lGODlhCwALAIAAAAAA3pn/ZiH5BAEAAAEALAAAAAALAAsAAAIUhA+hkcuO4lmNVindo7qyrIXiGBYAOw=="}else{f[d].loadImage.src=b}}}}}function a(h,g){if(typeof h!="undefined"){return h}else{return g}}}function drawShapes(W,F,ap,E,M,K,z){var C,J,O,I,at;if(typeof ap.shapesInChart=="object"){var at=ap.shapesInChart}if(typeof ap[0]=="object"){if(typeof ap[0].shapesInChart=="object"){var at=ap[0].shapesInChart}}if(typeof at=="object"){shapeLoadImages(ap);for(var an=0;an<at.length;an++){if(W=="HIGHLIGHT"){if(at[an].hightLight!=true){continue}}else{if(typeof z.config.dispShapesInChart=="object"){if(z.config.dispShapesInChart.indexOf(an)<0){continue}}else{if(typeof z.config.dispShapesInChart!="undefined"){if(typeof z.config.dispShapesInChart==false){continue}}}J=P(at[an].when,drawShape_default.when).toUpperCase();if(J!="ALWAYS"&&J!=W){continue}O=P(at[an].iter,drawShape_default.iter.toUpperCase());if(typeof O=="number"&&O!=z.cntiter&&z.config.animation==true){continue}if(O==="first"&&z.cntiter!=1&&z.config.animation==true){continue}if(O==="last"&&z.animationValue<1&&z.config.animation==true){continue}}if(typeof at[an].shape=="function"){C=at[an].shape}else{if(typeof at[an].shape!="string"){C=drawShape_default.shape.toUpperCase()}else{C=at[an].shape.toUpperCase()}}if(z.config.animation&&P(at[an].animate,drawShape_default.animate)){I=z.animationValue}else{I=1}F.save();switch(C){case"LINE":var Z,aj,U,w,af;Z=1*P(at[an].x2,drawShape_default.x2);aj=1*P(at[an].x1,drawShape_default.x1);U=1*P(at[an].y2,drawShape_default.y2);w=1*P(at[an].y1,drawShape_default.y1);if(Z<aj){af=Z;Z=aj;aj=af;af=U;U=w;w=af}F.beginPath();var ao=o(C,at[an],"","","",F,ap,E,z,Z,U,1*P(at[an].paddingX1,drawShape_default.paddingX1),1*P(at[an].paddingY1,drawShape_default.paddingY1),P(at[an].limitToChart,drawShape_default.limitToChart));var am=o(C,at[an],"","","",F,ap,E,z,aj,w,1*P(at[an].paddingX2,drawShape_default.paddingX2),1*P(at[an].paddingY2,drawShape_default.paddingY2),P(at[an].limitToChart,drawShape_default.limitToChart));if(Math.abs(ao.xpos-am.xpos)<z.config.zeroValue){Z=ao.xpos;aj=am.xpos;w=ao.ypos+(1-I)*(am.ypos-ao.ypos)/2;U=am.ypos-(1-I)*(am.ypos-ao.ypos)/2}else{var aw=(ao.ypos-am.ypos)/(ao.xpos-am.xpos);var av=ao.ypos-aw*ao.xpos;Z=am.xpos-(1-I)*(am.xpos-ao.xpos)/2;aj=ao.xpos+(1-I)*(am.xpos-ao.xpos)/2;U=aw*Z+av;w=aw*aj+av}F.moveTo(Z,U);F.lineTo(aj,w);F.lineWidth=Math.ceil(F.chartLineScale*P(at[an].strokeSize,drawShape_default.strokeSize));F.strokeStyle=P(at[an].strokeColor,drawShape_default.strokeColor);F.setLineDash(lineStyleFn(P(at[an].strokeStyle,drawShape_default.strokeStyle)));F.stroke();F.setLineDash([]);break;case"ARROW":var Z,aj,U,w,af;var h,f,ac,aa;var q,n,ai,ag;Z=1*P(at[an].x1,drawShape_default.x1);aj=1*P(at[an].x2,drawShape_default.x2);U=1*P(at[an].y1,drawShape_default.y1);w=1*P(at[an].y2,drawShape_default.y2);F.beginPath();var ao=o(C,at[an],"","","",F,ap,E,z,Z,U,1*P(at[an].paddingX1,drawShape_default.paddingX1),1*P(at[an].paddingY1,drawShape_default.paddingY1),P(at[an].limitToChart,drawShape_default.limitToChart));var am=o(C,at[an],"","","",F,ap,E,z,aj,w,1*P(at[an].paddingX2,drawShape_default.paddingX2),1*P(at[an].paddingY2,drawShape_default.paddingY2),P(at[an].limitToChart,drawShape_default.limitToChart));var k=I*1*P(at[an].arrowWidth,drawShape_default.arrowWidth);var l=I*1*P(at[an].arrowHeight,drawShape_default.arrowHeight);if(Math.abs(ao.xpos-am.xpos)<z.config.zeroValue){Z=ao.xpos;aj=am.xpos;w=ao.ypos;U=am.ypos-(1-I)*(am.ypos-ao.ypos);if(w>U){m=1}else{m=-1}ai=w-m*l;ag=ai;ac=U+m*l;aa=ac;q=Z-k/2;n=Z+k/2;h=q;f=n}else{var aw=(ao.ypos-am.ypos)/(ao.xpos-am.xpos);var av=ao.ypos-aw*ao.xpos;Z=am.xpos-(1-I)*(am.xpos-ao.xpos);aj=ao.xpos;U=aw*Z+av;w=aw*aj+av;if(Math.abs(U-w)<z.config.zeroValue){var m;if(aj<Z){m=1}else{m=-1}ai=w-k/2;ag=w+k/2;q=aj+m*l;n=q;ac=ai;aa=ag;h=Z-m*l;f=h}else{var m;if(aj<Z){m=1}else{m=-1}var ar=aj+m*l*Math.cos(Math.atan(aw));var aq=aw*ar+av;var R=aq+(1/aw)*ar;q=ar-(k/2)*(Math.cos(Math.atan(-1/aw)));n=ar+(k/2)*(Math.cos(Math.atan(-1/aw)));ai=(-1/aw)*q+R;ag=(-1/aw)*n+R;ar=Z-m*l*Math.cos(Math.atan(aw));aq=aw*ar+av;R=aq+(1/aw)*ar;h=ar-(k/2)*(Math.cos(Math.atan(-1/aw)));f=ar+(k/2)*(Math.cos(Math.atan(-1/aw)));ac=(-1/aw)*h+R;aa=(-1/aw)*f+R}var ar=aj+l*Math.cos(Math.atan(aw));var aq=aw*ar+av;var R=aq+(1/aw)}F.moveTo(Z,U);F.lineTo(aj,w);F.lineWidth=Math.ceil(F.chartLineScale*P(at[an].strokeSize,drawShape_default.strokeSize));F.strokeStyle=P(at[an].strokeColor,drawShape_default.strokeColor);F.setLineDash(lineStyleFn(P(at[an].strokeStyle,drawShape_default.strokeStyle)));F.stroke();F.restore();F.strokeStyle=P(at[an].strokeColor,drawShape_default.strokeColor);F.setLineDash(lineStyleFn(P(at[an].strokeStyle,drawShape_default.strokeStyle)));F.lineWidth=Math.ceil(F.chartLineScale*P(at[an].strokeSize,drawShape_default.strokeSize));F.setLineDash([]);if(P(at[an].arrowTop,drawShape_default.arrowTop)){F.moveTo(Z,U);F.lineTo(h,ac);F.lineTo(f,aa);F.lineTo(Z,U);F.stroke();F.closePath();F.fillStyle=P(at[an].strokeColor,drawShape_default.strokeColor);F.fill()}if(P(at[an].arrowBottom,drawShape_default.arrowBottom)){F.moveTo(aj,w);F.lineTo(q,ai);F.lineTo(n,ag);F.lineTo(aj,w);F.stroke();F.closePath();F.fillStyle=P(at[an].strokeColor,drawShape_default.strokeColor);F.fill()}F.setLineDash([]);break;case"TEXT":F.beginPath();var t,s,Q;t=1*P(at[an].x1,drawShape_default.x1);s=1*P(at[an].y1,drawShape_default.y1);Q=P(at[an].text,drawShape_default.text);if(typeof Q=="function"){Q=Q(an,null,F,z.config,t,s,z.borderX,z.borderY,true,ap,z.animationValue,z)}var ao=o(C,at[an],"","","",F,ap,E,z,t,s,1*P(at[an].paddingX1,drawShape_default.paddingX1),1*P(at[an].paddingY1,drawShape_default.paddingY1),P(at[an].limitToChart,drawShape_default.limitToChart));F.translate(ao.xpos,ao.ypos);var x=I*P(at[an].fontSize,drawShape_default.fontSize);F.font=P(at[an].fontStyle,drawShape_default.fontStyle)+" "+(Math.ceil(F.chartTextScale*x)).toString()+"px "+P(at[an].fontFamily,drawShape_default.fontFamily);F.fillStyle=P(at[an].fontColor,drawShape_default.fontColor);F.textAlign=P(at[an].textAlign,drawShape_default.textAlign);F.textBaseline=P(at[an].textBaseline,drawShape_default.textBaseline);var T=Math.PI*1*P(at[an].rotate,drawShape_default.rotate)/180;F.rotate(T);setTextBordersAndBackground(F,Q,Math.ceil(F.chartTextScale*x),0,0,P(at[an].textBorders,drawShape_default.textBorders),P(at[an].textBordersColor,drawShape_default.textBordersColor),Math.ceil((I)*F.chartLineScale*P(at[an].textBordersWidth,drawShape_default.textBordersWidth)),Math.ceil(F.chartSpaceScale*P(at[an].textBordersXSpace,drawShape_default.textBordersXSpace)),Math.ceil(F.chartSpaceScale*P(at[an].textBordersYSpace,drawShape_default.textBordersYSpace)),P(at[an].textBordersStyle,drawShape_default.textBordersStyle),P(at[an].textBackgroundColor,drawShape_default.textBackgroundColor),"TEXTINSHAPE");if(O!=="all"||(O==="all"&&z.cntiter!=z.config.animationSteps)||z.config.animation==false){F.fillTextMultiLine(Q,0,0,F.textBaseline,Math.ceil(F.chartTextScale*x),true,z.config.detectMouseOnText,F,"SHAPESINCHART_TEXTMOUSE",T,ao.xpos,ao.ypos,-1,-1)}else{F.fillTextMultiLine(Q,0,0,F.textBaseline,Math.ceil(F.chartTextScale*x),true,false,F,"SHAPESINCHART_TEXTMOUSE",T,ao.xpos,ao.ypos,-1,-1)}break;case"IMAGE":var ah=P(at[an].imageAlign,drawShape_default.imageAlign);var H=P(at[an].imageBaseline,drawShape_default.imageBaseline);var t,s,Q;t=1*P(at[an].x1,drawShape_default.x1);s=1*P(at[an].y1,drawShape_default.y1);var ao=o(C,at[an],ah,H,at[an].loadImage,F,ap,E,z,t,s,1*P(at[an].paddingX1,drawShape_default.paddingX1),1*P(at[an].paddingY1,drawShape_default.paddingY1),P(at[an].limitToChart,drawShape_default.limitToChart));F.translate(ao.xpos,ao.ypos);var T=Math.PI*1*P(at[an].rotate,drawShape_default.rotate)/180;F.rotate(T);var ax=P(at[an].imageWidth,at[an].loadImage.width);var Y=P(at[an].imageHeight,at[an].loadImage.height);F.drawImage(at[an].loadImage,0,0,at[an].loadImage.width,at[an].loadImage.height,0,0,ax,Y);break;case"STAR":case"PLUS":case"CROSS":var N,D,L,B,r,A,t,s,X,v;var A=(Math.PI*(1*P(at[an].rotate,drawShape_default.rotate)-90)/180);switch(C){case"PLUS":r=2;break;case"CROSS":r=2;A+=Math.PI/4;break;default:r=1*P(at[an].lineCount,drawShape_default.lineCount);if(r<2){r=2}break}var y=Math.PI/r;t=1*P(at[an].x1,drawShape_default.x1);s=1*P(at[an].y1,drawShape_default.y1);var ad=I*1*P(at[an].radius,drawShape_default.radius);if(ad<0){var am=o(C,at[an],"","","",F,ap,E,z,1*P(at[an].x2,drawShape_default.x2),1*P(at[an].y2,drawShape_default.y2),1*P(at[an].paddingX2,drawShape_default.paddingX2),1*P(at[an].paddingY2,drawShape_default.paddingY2),P(at[an].limitToChart,drawShape_default.limitToChart));ad=Math.sqrt(((G.xpos-am.xpos)*(G.xpos-am.xpos))+((G.ypos-am.ypos)*(G.ypos-am.ypos)))}var ao=o(C,at[an],"","","",F,ap,E,z,t,s,1*P(at[an].paddingX1,drawShape_default.paddingX1),1*P(at[an].paddingY1,drawShape_default.paddingY1),P(at[an].limitToChart,drawShape_default.limitToChart));F.beginPath();F.lineWidth=Math.ceil(F.chartLineScale*P(at[an].strokeSize,drawShape_default.strokeSize));F.strokeStyle=P(at[an].strokeColor,drawShape_default.strokeColor);F.setLineDash(lineStyleFn(P(at[an].strokeStyle,drawShape_default.strokeStyle)));for(var al=0;al<r;al++){N=ao.xpos+ad*Math.cos(A);D=ao.ypos+ad*Math.sin(A);L=ao.xpos-ad*Math.cos(A);B=ao.ypos-ad*Math.sin(A);A+=y;F.moveTo(N,D);F.lineTo(L,B);F.stroke()}F.setLineDash([]);break;case"REGULARSHAPE":case"TRIANGLE":case"SQUARE":case"DIAMOND":var au,V,p,A;var A=(Math.PI*(1*P(at[an].rotate,drawShape_default.rotate)-90)/180);switch(C){case"TRIANGLE":p=3;break;case"SQUARE":p=4;A+=Math.PI/4;break;case"DIAMOND":p=4;break;default:p=1*P(at[an].sideCount,drawShape_default.sideCount);if(p<3){p=3}break}var y=2*Math.PI/p;t=1*P(at[an].x1,drawShape_default.x1);s=1*P(at[an].y1,drawShape_default.y1);var ao=o(C,at[an],"","","",F,ap,E,z,t,s,1*P(at[an].paddingX1,drawShape_default.paddingX1),1*P(at[an].paddingY1,drawShape_default.paddingY1),P(at[an].limitToChart,drawShape_default.limitToChart));var ad=I*1*P(at[an].radius,drawShape_default.radius);if(ad<0){var am=o(C,at[an],"","","",F,ap,E,z,1*P(at[an].x2,drawShape_default.x2),1*P(at[an].y2,drawShape_default.y2),1*P(at[an].paddingX2,drawShape_default.paddingX2),1*P(at[an].paddingY2,drawShape_default.paddingY2),P(at[an].limitToChart,drawShape_default.limitToChart));ad=Math.sqrt(((G.xpos-am.xpos)*(G.xpos-am.xpos))+((G.ypos-am.ypos)*(G.ypos-am.ypos)))}F.beginPath();F.lineWidth=Math.ceil(F.chartLineScale*P(at[an].strokeSize,drawShape_default.strokeSize));F.strokeStyle=P(at[an].strokeColor,drawShape_default.strokeColor);F.setLineDash(lineStyleFn(P(at[an].strokeStyle,drawShape_default.strokeStyle)));for(var al=0;al<p;al++){au=ao.xpos+ad*Math.cos(A);V=ao.ypos+ad*Math.sin(A);A+=y;if(al==0){F.moveTo(au,V)}else{F.lineTo(au,V)}}F.closePath();F.fillStyle=setOptionValue(true,1,"SHAPESINCHART_REGULARSHAPE",F,ap,E,at[an].fillColor,drawShape_default.fillColor,"fillColor",-1,-1,{gradientColors:at[an].gradientColors,animationValue:I,midPosX:ao.xpos,midPosY:ao.ypos,radius:ad});F.fill();F.stroke();F.setLineDash([]);break;case"ELLIPSE":F.beginPath();var G=o(C,at[an],"","","",F,ap,E,z,1*P(at[an].x1,drawShape_default.x1),1*P(at[an].y1,drawShape_default.y1),1*P(at[an].paddingX1,drawShape_default.paddingX1),1*P(at[an].paddingY1,drawShape_default.paddingY1),P(at[an].limitToChart,drawShape_default.limitToChart));var d=I*1*P(at[an].ellipseHeight,drawShape_default.ellipseHeight);var c=I*1*P(at[an].ellipseWidth,drawShape_default.ellipseWidth);F.moveTo(G.xpos,G.ypos-d/2);F.bezierCurveTo(G.xpos+c/2,G.ypos-d/2,G.xpos+c/2,G.ypos+d/2,G.xpos,G.ypos+d/2);F.bezierCurveTo(G.xpos-c/2,G.ypos+d/2,G.xpos-c/2,G.ypos-d/2,G.xpos,G.ypos-d/2);F.closePath();F.fillStyle=setOptionValue(true,1,"SHAPESINCHART_ELLIPSE",F,ap,E,at[an].fillColor,drawShape_default.fillColor,"fillColor",-1,-1,{gradientColors:at[an].gradientColors,animationValue:I,midPosX:G.xpos,midPosY:G.ypos,radius:Math.max(c/2,d/2)});F.fill();F.lineWidth=Math.ceil(F.chartLineScale*P(at[an].strokeSize,drawShape_default.strokeSize));F.strokeStyle=P(at[an].strokeColor,drawShape_default.strokeColor);F.setLineDash(lineStyleFn(P(at[an].strokeStyle,drawShape_default.strokeStyle)));F.stroke();F.setLineDash([]);break;case"RECTANGLE":var Z,aj,U,w,af;Z=1*P(at[an].x1,drawShape_default.x1);aj=1*P(at[an].x2,drawShape_default.x2);U=1*P(at[an].y2,drawShape_default.y2);w=1*P(at[an].y1,drawShape_default.y1);F.beginPath();var ao=o(C,at[an],"","","",F,ap,E,z,aj,U,1*P(at[an].paddingX1,drawShape_default.paddingX1),1*P(at[an].paddingY1,drawShape_default.paddingY1),P(at[an].limitToChart,drawShape_default.limitToChart));var am=o(C,at[an],"","","",F,ap,E,z,Z,w,1*P(at[an].paddingX2,drawShape_default.paddingX2),1*P(at[an].paddingY2,drawShape_default.paddingY2),P(at[an].limitToChart,drawShape_default.limitToChart));if(am.xpos<ao.xpos){af=am.xpos;am.xpos=ao.xpos;ao.xpos=af}if(am.ypos<ao.ypos){af=am.ypos;am.ypos=ao.ypos;ao.ypos=af}F.moveTo(ao.xpos+(1-I)*((am.xpos-ao.xpos)/2),ao.ypos+(1-I)*((am.ypos-ao.ypos)/2));F.lineTo(ao.xpos+(1-I)*((am.xpos-ao.xpos)/2),am.ypos-(1-I)*((am.ypos-ao.ypos)/2));F.lineTo(am.xpos-(1-I)*((am.xpos-ao.xpos)/2),am.ypos-(1-I)*((am.ypos-ao.ypos)/2));F.lineTo(am.xpos-(1-I)*((am.xpos-ao.xpos)/2),ao.ypos+(1-I)*((am.ypos-ao.ypos)/2));F.closePath();F.fillStyle=setOptionValue(true,1,"SHAPESINCHART_RECT",F,ap,E,at[an].fillColor,drawShape_default.fillColor,"fillColor",-1,-1,{gradientColors:at[an].gradientColors,animationValue:I,xPosLeft:ao.xpos+(1-I)*((am.xpos-ao.xpos)/2),yPosBottom:ao.ypos+(1-I)*((am.ypos-ao.ypos)/2),yPosTop:am.ypos-(1-I)*((am.ypos-ao.ypos)/2)});F.fill();F.lineWidth=Math.ceil(F.chartLineScale*P(at[an].strokeSize,drawShape_default.strokeSize));F.strokeStyle=P(at[an].strokeColor,drawShape_default.strokeColor);F.setLineDash(lineStyleFn(P(at[an].strokeStyle,drawShape_default.strokeStyle)));F.stroke();F.setLineDash([]);break;case"MYSHAPE":var ak,u,ao,g,e;F.beginPath();if(typeof at[an].shapePoints!=="object"){break}if(at[an].shapePoints.length<3){break}for(var al=0;al<at[an].shapePoints.length;al++){ak=P(at[an].shapePoints[al][0],drawShape_default.x1);u=P(at[an].shapePoints[al][1],drawShape_default.y1);g=P(at[an].shapePadding[al][0],drawShape_default.paddingX1);e=P(at[an].shapePadding[al][1],drawShape_default.paddingY1);ao=o(C,at[an],"","","",F,ap,E,z,ak,u,1*g,1*e,P(at[an].limitToChart,drawShape_default.limitToChart));if(al==0){F.moveTo(ao.xpos,ao.ypos)}else{F.lineTo(ao.xpos,ao.ypos)}}F.closePath();F.fillStyle=P(at[an].fillColor,drawShape_default.fillColor);F.fill();F.lineWidth=Math.ceil(F.chartLineScale*P(at[an].strokeSize,drawShape_default.strokeSize));F.strokeStyle=P(at[an].strokeColor,drawShape_default.strokeColor);F.setLineDash(lineStyleFn(P(at[an].strokeStyle,drawShape_default.strokeStyle)));F.stroke();F.setLineDash([]);break;case"CIRCLE":F.beginPath();var G=o(C,at[an],"","","",F,ap,E,z,1*P(at[an].x1,drawShape_default.x1),1*P(at[an].y1,drawShape_default.y1),1*P(at[an].paddingX1,drawShape_default.paddingX1),1*P(at[an].paddingY1,drawShape_default.paddingY1),P(at[an].limitToChart,drawShape_default.limitToChart));var ad=I*1*P(at[an].radius,drawShape_default.radius);if(ad<0){var am=o(C,at[an],"","","",F,ap,E,z,1*P(at[an].x2,drawShape_default.x2),1*P(at[an].y2,drawShape_default.y2),1*P(at[an].paddingX2,drawShape_default.paddingX2),1*P(at[an].paddingY2,drawShape_default.paddingY2),P(at[an].limitToChart,drawShape_default.limitToChart));ad=Math.sqrt(((G.xpos-am.xpos)*(G.xpos-am.xpos))+((G.ypos-am.ypos)*(G.ypos-am.ypos)))}var G=o(C,at[an],"","","",F,ap,E,z,1*P(at[an].x1,drawShape_default.x1),1*P(at[an].y1,drawShape_default.y1),1*P(at[an].paddingX1,drawShape_default.paddingX1),1*P(at[an].paddingY1,drawShape_default.paddingY1),P(at[an].limitToChart,drawShape_default.limitToChart));if(1*P(at[an].endAngle,drawShape_default.endAngle)-1*P(at[an].startAngle,drawShape_default.startAngle)!=360){F.arc(G.xpos,G.ypos,0,(Math.PI/180)*1*P(at[an].startAngle,drawShape_default.startAngle),(Math.PI/180)*1*P(at[an].endAngle,drawShape_default.endAngle),false)}F.arc(G.xpos,G.ypos,I*1*ad,(Math.PI/180)*1*P(at[an].startAngle,drawShape_default.startAngle),(Math.PI/180)*1*P(at[an].endAngle,drawShape_default.endAngle),true);F.closePath();F.fillStyle=setOptionValue(true,1,"SHAPESINCHART_CIRCLE",F,ap,E,at[an].fillColor,drawShape_default.fillColor,"fillColor",-1,-1,{gradientColors:at[an].gradientColors,animationValue:I,midPosX:G.xpos,midPosY:G.ypos,radius:ad});F.fill();F.lineWidth=Math.ceil(F.chartLineScale*P(at[an].strokeSize,drawShape_default.strokeSize));F.strokeStyle=P(at[an].strokeColor,drawShape_default.strokeColor);F.setLineDash(lineStyleFn(P(at[an].strokeStyle,drawShape_default.strokeStyle)));F.stroke();F.setLineDash([]);break;default:if(typeof at[an].shape=="function"){z.currentShape=an;z.shapesInChart=at[an];z.xypos1=o(C,at[an],"","","",F,ap,E,z,1*P(at[an].x1,drawShape_default.x1),1*P(at[an].y1,drawShape_default.y1),1*P(at[an].paddingX1,drawShape_default.paddingX1),1*P(at[an].paddingY1,drawShape_default.paddingY1),P(at[an].limitToChart,drawShape_default.limitToChart));z.xypos2=o(C,at[an],"","","",F,ap,E,z,1*P(at[an].x2,drawShape_default.x2),1*P(at[an].y2,drawShape_default.y2),1*P(at[an].paddingX2,drawShape_default.paddingX2),1*P(at[an].paddingY2,drawShape_default.paddingY2),P(at[an].limitToChart,drawShape_default.limitToChart));z.xypos3=o(C,at[an],"","","",F,ap,E,z,1*P(at[an].x3,drawShape_default.x3),1*P(at[an].y3,drawShape_default.y3),1*P(at[an].paddingX3,drawShape_default.paddingX3),1*P(at[an].paddingY3,drawShape_default.paddingY3),P(at[an].limitToChart,drawShape_default.limitToChart));z.xypos4=o(C,at[an],"","","",F,ap,E,z,1*P(at[an].x4,drawShape_default.x4),1*P(at[an].y4,drawShape_default.y4),1*P(at[an].paddingX4,drawShape_default.paddingX4),1*P(at[an].paddingY4,drawShape_default.paddingY4),P(at[an].limitToChart,drawShape_default.limitToChart));z.xypos5=o(C,at[an],"","","",F,ap,E,z,1*P(at[an].x5,drawShape_default.x5),1*P(at[an].y5,drawShape_default.y5),1*P(at[an].paddingX5,drawShape_default.paddingX5),1*P(at[an].paddingY5,drawShape_default.paddingY5),P(at[an].limitToChart,drawShape_default.limitToChart));z.xypos6=o(C,at[an],"","","",F,ap,E,z,1*P(at[an].x6,drawShape_default.x6),1*P(at[an].y6,drawShape_default.y6),1*P(at[an].paddingX6,drawShape_default.paddingX6),1*P(at[an].paddingY6,drawShape_default.paddingY6),P(at[an].limitToChart,drawShape_default.limitToChart));z.xypos7=o(C,at[an],"","","",F,ap,E,z,1*P(at[an].x7,drawShape_default.x7),1*P(at[an].y7,drawShape_default.y7),1*P(at[an].paddingX7,drawShape_default.paddingX7),1*P(at[an].paddingY7,drawShape_default.paddingY7),P(at[an].limitToChart,drawShape_default.limitToChart));z.xypos8=o(C,at[an],"","","",F,ap,E,z,1*P(at[an].x8,drawShape_default.x8),1*P(at[an].y8,drawShape_default.y8),1*P(at[an].paddingX8,drawShape_default.paddingX8),1*P(at[an].paddingY8,drawShape_default.paddingY8),P(at[an].limitToChart,drawShape_default.limitToChart));z.xypos9=o(C,at[an],"","","",F,ap,E,z,1*P(at[an].x9,drawShape_default.x9),1*P(at[an].y9,drawShape_default.y9),1*P(at[an].paddingX9,drawShape_default.paddingX9),1*P(at[an].paddingY9,drawShape_default.paddingY9),P(at[an].limitToChart,drawShape_default.limitToChart));z.xypos10=o(C,at[an],"","","",F,ap,E,z,1*P(at[an].x10,drawShape_default.x10),1*P(at[an].y10,drawShape_default.y10),1*P(at[an].paddingX10,drawShape_default.paddingX10),1*P(at[an].paddingY10,drawShape_default.paddingY10),P(at[an].limitToChart,drawShape_default.limitToChart));at[an].shape(W,F,ap,E,M,K,z)}break}F.restore()}}function o(a,az,aA,aR,aE,aI,aU,aC,j,aF,aB,aG,aS,aM){var b,i,aT;if(typeof az.position!="string"){aT=drawShape_default.position.toUpperCase()}else{aT=az.position.toUpperCase()}switch(aT){case"RELATIVE":b=aG;i=aS;switch(aF){case 0:break;case 1:b+=j.borderX;break;case 2:b+=j.midPosX;break;case -2:if(window.devicePixelRatio){b+=(aI.canvas.width/2)/window.devicePixelRatio}else{b+=aI.canvas.width/2}break;case 3:b+=b+2*j.midPosX-j.borderX;break;case 4:if(window.devicePixelRatio){b+=aI.canvas.width/window.devicePixelRatio}else{b+=aI.canvas.width}break;default:b+=j.midPosX;break}switch(aB){case 0:break;case 3:i+=j.borderY;break;case 2:i+=j.midPosY;break;case -2:if(window.devicePixelRatio){i+=(aI.canvas.height/2)/window.devicePixelRatio}else{i+=aI.canvas.height/2}break;case 1:i+=i+2*j.midPosY-j.borderY;break;case 4:if(window.devicePixelRatio){i+=aI.canvas.height/window.devicePixelRatio}else{i+=aI.canvas.height}break;default:i+=j.midPosY;break}break;case"INCHART":switch(aI.tpdata){case 0:switch(tpdraw(aI,aU.datasets[0])){case"Radar":var aO=((2*Math.PI)/(aU.labels.length))*aF;i=ab(j.config.logarithmic,aB,aC[0][0].calculatedScale,aC[0][0].scaleHop,aM);b=Math.cos(j.config.startAngle*Math.PI/180-aO)*i;i=Math.sin(j.config.startAngle*Math.PI/180-aO)*i;b=aC[0][0].midPosX+b+aG;i=aC[0][0].midPosY-i+aS;break;case"Line":i=ab(aC[0][0].logarithmic,aB,aC[0][0].calculatedScale,aC[0][0].scaleHop,aM)-aC[0][0].zeroY;i=aC[0][0].yAxisPos-i+aS;var aK=aF;if(aM){if(aK<0){aK=0}if(aK>aC[0][0].nbValueHop){aK=aC[0][0].nbValueHop}}b=aC[0][0].yAxisPosX+(aC[0][0].valueHop*aK)+aG;break;case"Bar":case"StackedBar":i=aC[0][0].xAxisPosY-ab(j.config.logarithmic,aB,aC[0][0].calculatedScale,aC[0][0].scaleHop,aM)+aS;var aK=aF;if(aM){if(aK<-0.5){aK=-0.5}if(aK>aU.labels.length-0.5){aK=aU.labels.length-0.5}}b=aC[0][0].yAxisPosX+aC[0][0].valueHop*(aK+0.5)+aG;break;case"HorizontalStackedBar":case"HorizontalBar":b=aC[0][0].yAxisPosX+ab(j.config.logarithmic,aF,aC[0][0].calculatedScale,aC[0][0].valueHop,aM)+aG;var aK=aB;if(aM){if(aK<-0.5){aK=-0.5}if(aK>aU.labels.length-0.5){aK=aU.labels.length-0.5}}i=aC[0][0].xAxisPosY-aC[0][0].scaleHop*(aK+0.5)+aS;break;default:b=aF+aG;i=aB+aS;break}break;case 1:switch(aI.tpchart){case"Pie":case"Doughnut":case"PolarArea":if(aF<-0.499){b=-0.499}else{if(aF>aU.length-0.501){b=aU.length-0.501}else{b=aF}}var aN=Math.round(b);var aL=aC[aN].startAngle;var aP=aC[aN].segmentAngle;var aD=aC[aN].firstAngle;var aJ=aC[aN].realStartAngle;var aH=aC[aN].endAngle;var aO=2*Math.PI-(aL+(b-aN+0.5)*aP);if(aI.tpchart=="PolarArea"){i=ab(j.config.logarithmic,aB,aC[0].calculatedScale,aC[0].scaleHop)}else{i=aC[0].int_radius+aB*(aC[0].ext_radius-aC[0].int_radius)}if(aM){if(i<-aC[0].ext_radius){i=-aC[0].ext_radius}if(i>aC[0].ext_radius){i=aC[0].ext_radius}}b=Math.cos(aO)*i;i=Math.sin(aO)*i;b=aC[0].midPosX+b+aG;i=aC[0].midPosY-i+aS;break;default:b=aF+aG;i=aB+aS;break}break;default:b=aF+aG;i=aB+aS;break}break;case"ABSOLUTE":default:b=aF+aG;i=aB+aS;break}if(a=="IMAGE"){var ay=P(az.imageWidth,aE.width);var aQ=P(az.imageHeight,aE.height);switch(aA){case"left":break;case"right":b-=ay;break;case"center":b-=(ay/2);break;default:break}switch(aR){case"top":break;case"bottom":i-=aQ;break;case"middle":i-=(aQ/2);break;default:break}}return{xpos:b,ypos:i}}function ab(j,az,b,aB,i){if(!j){var aA=b.steps*b.stepValue;var ay=az-b.graphMin;if(i){var a=ae(ay/aA,1,0);return(aB*b.steps)*a}else{return(aB*b.steps)*(ay/aA)}}else{return ae(log10(az)*aB-log10(b.graphMin)*aB,undefined,0)}}function ae(a,i,b){if(isNumber(i)){if(a>i){return i}}if(isNumber(b)){if(a<b){return b}}return a}function P(b,a){if(typeof b!="undefined"){return b}else{return a}}function S(j,ay,a,b,i){return a+(b*j)}}function addIns_highLight(ctx,config,data,movement,animationCount,statData){var special;var shapesVar,shapeAddins;var i,decalRadius,property;var addHighLight=false,totreat;var rectHeight,rectWidth,ratio;if(ctx.tpdata==0){if(typeof data.special=="object"){special=data.special}if(typeof data.shapesInChart=="object"){shapesVar=data.shapesInChart}else{data.shapesInChart=[];shapesVar=data.shapesInChart}}else{if(typeof data[0].special=="object"){special=data[0].special}if(typeof data[0].shapesInChart=="object"){shapesVar=data[0].shapesInChart}else{data[0].shapesInChart=[];shapesVar=data[0].shapesInChart}}addHighLight=false;if(typeof special=="object"){for(i=0;i<special.length;i++){totreat=false;if(typeof special[i].addIns_shape=="undefined"){shapeAddins="ARROW"}else{shapeAddins=special[i].addIns_shape.toUpperCase()}switch(shapeAddins){case"ELLIPSE":switch(tpdraw(ctx,(typeof data.datasets=="object")?data.datasets[special[i].posi]:undefined)){case"Line":case"Radar":totreat=true;addHighLight=true;shapesVar[shapesVar.length]={hightLight:true};shapesVar[shapesVar.length-1].shape=special[i].addIns_shape;shapesVar[shapesVar.length-1].position="inchart";shapesVar[shapesVar.length-1].x1=special[i].posj;shapesVar[shapesVar.length-1].y1=data.datasets[special[i].posi].data[special[i].posj];shapesVar[shapesVar.length-1].ellipseHeight=30;shapesVar[shapesVar.length-1].ellipseWidth=40;break;case"Bar":case"StackedBar":case"HorizontalBar":case"HorizontalStackedBar":totreat=true;addHighLight=true;shapesVar[shapesVar.length]={hightLight:true};shapesVar[shapesVar.length-1].shape=special[i].addIns_shape;shapesVar[shapesVar.length-1].position="absolute";shapesVar[shapesVar.length-1].x1=(statData[special[i].posi][special[i].posj].xPosRight+statData[special[i].posi][special[i].posj].xPosLeft)/2;shapesVar[shapesVar.length-1].y1=(statData[special[i].posi][special[i].posj].yPosTop+statData[special[i].posi][special[i].posj].yPosBottom)/2;rectHeight=1.25*Math.abs(statData[special[i].posi][special[i].posj].yPosTop-statData[special[i].posi][special[i].posj].yPosBottom);rectWidth=1.25*Math.abs(statData[special[i].posi][special[i].posj].xPosRight-statData[special[i].posi][special[i].posj].xPosLeft);ratio=rectWidth/rectHeight;shapesVar[shapesVar.length-1].ellipseWidth=Math.sqrt((rectWidth*rectWidth)+(ratio*ratio)*(rectHeight*rectHeight));shapesVar[shapesVar.length-1].ellipseHeight=shapesVar[shapesVar.length-1].ellipseWidth/ratio;break;case"Pie":case"Doughnut":case"PolarArea":default:break}shapesVar[shapesVar.length-1].strokeColor="black";shapesVar[shapesVar.length-1].fillColor="black";break;case"ARROW":default:totreat=true;addHighLight=true;shapesVar[shapesVar.length]={hightLight:true};shapesVar[shapesVar.length-1].shape="arrow";switch(tpdraw(ctx,(typeof data.datasets=="object")?data.datasets[special[i].posi]:undefined)){case"Line":case"Radar":shapesVar[shapesVar.length-1].position="inchart";shapesVar[shapesVar.length-1].x1=special[i].posj;shapesVar[shapesVar.length-1].y1=data.datasets[special[i].posi].data[special[i].posj];shapesVar[shapesVar.length-1].paddingX1=30;shapesVar[shapesVar.length-1].paddingY1=-30;shapesVar[shapesVar.length-1].x2=special[i].posj;shapesVar[shapesVar.length-1].y2=data.datasets[special[i].posi].data[special[i].posj];break;case"Bar":case"StackedBar":case"HorizontalBar":case"HorizontalStackedBar":shapesVar[shapesVar.length-1].position="absolute";shapesVar[shapesVar.length-1].x2=statData[special[i].posi][special[i].posj].xPosRight;shapesVar[shapesVar.length-1].y2=statData[special[i].posi][special[i].posj].yPosTop;shapesVar[shapesVar.length-1].x1=shapesVar[shapesVar.length-1].x2;shapesVar[shapesVar.length-1].y1=shapesVar[shapesVar.length-1].y2;if(ctx.tpchart=="Bar"||ctx.tpchart=="StackedBar"){shapesVar[shapesVar.length-1].x1=shapesVar[shapesVar.length-1].x1+30;if(data.datasets[special[i].posi].data[special[i].posj]>=0){shapesVar[shapesVar.length-1].y1=shapesVar[shapesVar.length-1].y1-30}else{shapesVar[shapesVar.length-1].y1=shapesVar[shapesVar.length-1].y1+30}}else{shapesVar[shapesVar.length-1].y1=shapesVar[shapesVar.length-1].y1-30;if(data.datasets[special[i].posi].data[special[i].posj]>=0){shapesVar[shapesVar.length-1].x1=shapesVar[shapesVar.length-1].x1+30}else{shapesVar[shapesVar.length-1].x1=shapesVar[shapesVar.length-1].x1-30}}break;case"Pie":case"Doughnut":if(typeof config.highLightSet.expandOutRadius=="number"){decalRadius=config.highLightSet.expandOutRadius}else{decalRadius=0}shapesVar[shapesVar.length-1].position="inchart";shapesVar[shapesVar.length-1].limitToChart=false;shapesVar[shapesVar.length-1].x1=special[i].posi;if(ctx.tpchart=="Pie"){shapesVar[shapesVar.length-1].y1=1.3+decalRadius}else{shapesVar[shapesVar.length-1].y1=1+(100*0.3)/(100-config.percentageInnerCutout)}shapesVar[shapesVar.length-1].x2=special[i].posi;shapesVar[shapesVar.length-1].y2=1+decalRadius;break;case"PolarArea":shapesVar[shapesVar.length-1].position="inchart";shapesVar[shapesVar.length-1].limitToChart=false;shapesVar[shapesVar.length-1].x1=special[i].posi;shapesVar[shapesVar.length-1].y1=data[special[i].posi].value+0.3*(statData[0].outerVal-statData[0].calculatedScale.graphMin);shapesVar[shapesVar.length-1].x2=special[i].posi;shapesVar[shapesVar.length-1].y2=data[special[i].posi].value;break}shapesVar[shapesVar.length-1].strokeColor="black";shapesVar[shapesVar.length-1].fillColor="black";break}if(totreat){for(property in config.highLightSet){if(property.substring(0,7)=="addIns_"){eval("shapesVar[shapesVar.length-1]."+property.substring(7,50)+"=config.highLightSet[property];")}}}}if(addHighLight){drawShapes("HIGHLIGHT",ctx,data,statData,0,0,{config:config});for(i=shapesVar.length-1;i>=0;i--){shapesVar.splice(i,1)}}}};